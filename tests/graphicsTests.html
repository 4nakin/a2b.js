<html>
  <head>
    <script language="JavaScript" src="../jsunit/app/jsUnitCore.js"></script>

    <script src="../vendor/three.js/three.min.js"></script>
    <script type="text/javascript" src="../vendor/physi.js/physi.js"></script>
    
    <script type="text/javascript" src="../fonts/gentilis_bold.typeface.js"></script>
    <script type="text/javascript" src="../fonts/gentilis_regular.typeface.js"></script>
    <script type="text/javascript" src="../fonts/optimer_bold.typeface.js"></script>
    <script type="text/javascript" src="../fonts/optimer_regular.typeface.js"></script>
    <script type="text/javascript" src="../fonts/helvetiker_bold.typeface.js"></script>
    <script type="text/javascript" src="../fonts/helvetiker_regular.typeface.js"></script>
    <script type="text/javascript" src="../fonts/droid/droid_sans_regular.typeface.js"></script>
    <script type="text/javascript" src="../fonts/droid/droid_sans_bold.typeface.js"></script>
    <script type="text/javascript" src="../fonts/droid/droid_serif_regular.typeface.js"></script>
    <script type="text/javascript" src="../fonts/droid/droid_serif_bold.typeface.js"></script>

    <script language="JavaScript" src="../js/graphics.js"></script>
    <script language="JavaScript" src="../js/game.js"></script>
    <script language="JavaScript">

/***********************
 * graphics.js   tests *
 ***********************/
function testCreateTextMesh() {
  // 
  inform("testCreateTextMesh - started");
  var materials = A2B.initMaterials();
  //log.info("Starting createTextMesh test");
  assertNotNull("Should initialise an array of materials for the game", materials);
  var rockMaterial = materials["rock"];

  var fontProps = A2B.initFontProps();

  var textMesh = A2B.createTextMesh("test text", rockMaterial, fontProps );
  assertNotNull("Should create a graphic mesh for given text", textMesh);

  inform("testCreateTextMesh - ended");
}


function testDegreesToRadians() {
  inform("testDegreesToRadians - started");

  assertEquals("Should 0 degrees to radians" ,0, A2B.degreesToRadians(0));
  assertEquals("Should 90 degrees to radians" ,1.5707963267948966, A2B.degreesToRadians(90));

  inform("testDegreesToRadians - ended");

}

function testGetDirectionalLight() {
  inform("testGetDirectionalLight - started");

  // pointless methods at the moment as there are no config parms..
  var light = A2B.getDirectionalLight();
  assertNotNull("Should create a directional light", light);
  // check light properties here..
  assertTrue(light.castShadow);

  inform("testGetDirectionalLight - ended");

}

function testGetSpotLight() {
  inform("testGetSpotLight - started");

  // pointless methods at the moment as there are no config parms..
  var light = A2B.getSpotLight();
  assertNotNull("Should create a spot light", light);
  // check light properties here..
  assertTrue(light.castShadow);

  inform("testGetSpotLight - ended");

}

function testInitFontProps() {
  inform("testInitFontProps - started");
  // 
  var fontProps = A2B.initFontProps();
  assertNotNull("Should initialise properties for fonts", fontProps);
  // check font properties here..
  assertEquals(70,fontProps.size);

  inform("testInitFontProps - ended");
}

function testInitMaterials() {
  inform("testInitMaterials - started");
  // 
  var materials = A2B.initMaterials();
  assertNotNull("Should initialise an array of materials for the game", materials);
  var rockMaterial = materials["rock"];
  // check materials properties here..
  assertNotNull(materials["rock"]);

  inform("testInitMaterials - ended");
}

function testLoadImage() {
  inform("testLoadImage - started");
  // 
  var path = "../images/";
  var filename = "rocks.jpg";
  var image = A2B.loadImage(path, filename);
  assertNotNull("Should load an image from path", image);

  inform("testLoadImage - ended");
}

function testLoadImages() {
  inform("testLoadImages - started");
  // 
  var path = "../images/";
  var filenames = ["rocks.jpg","wood.jpg"];
  var images = A2B.loadImages(path, filenames);
  assertNotNull("Should load an array of images from path", images);

  inform(images);

  inform("testLoadImages - ended");
}

function testLoadMissingImage() {
  inform("testLoadMissingImage - started");
  // 
  var path = "../images/";
  var filename = "missing.jpg";
  var image = A2B.loadImage(path, filename);
  assertNull("Should fail to load an image from path", image);

  inform("testLoadMissingImage - ended");
}

    </script>
  </head>
  <body>
    This is a Test Page for graphics.js functions.
  </body>
</html>